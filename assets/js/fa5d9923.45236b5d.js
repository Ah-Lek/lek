"use strict";(self.webpackChunkahlek=self.webpackChunkahlek||[]).push([[4952],{1231:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"tutorial-doc-week3.md/gstreamer/generating-the-remap-mapping-files","title":"2. Generating the Remap Mapping Files","description":"We aim to develop a GStreamer filter to transform fisheye images into corrected single-angle or equirectangular images. This transformation requires reading a set of X, Y mapping tables to reposition each point, known as remap maps.","source":"@site/docs/tutorial-doc-week3.md/gstreamer/generating-the-remap-mapping-files.md","sourceDirName":"tutorial-doc-week3.md/gstreamer","slug":"/tutorial-doc-week3.md/gstreamer/generating-the-remap-mapping-files","permalink":"/lek/docs/tutorial-doc-week3.md/gstreamer/generating-the-remap-mapping-files","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"practicalSidebar","previous":{"title":"1. Overview","permalink":"/lek/docs/tutorial-doc-week3.md/gstreamer/overview"},"next":{"title":"3. Developing the gst-plugins-bad-dev Project on PC","permalink":"/lek/docs/tutorial-doc-week3.md/gstreamer/developing-the-project-on-pc"}}');var i=n(4848),a=n(8453);const o={sidebar_position:2},s="2. Generating the Remap Mapping Files",p={},c=[];function l(e){const t={a:"a",code:"code",h1:"h1",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"2-generating-the-remap-mapping-files",children:"2. Generating the Remap Mapping Files"})}),"\n",(0,i.jsx)(t.p,{children:"We aim to develop a GStreamer filter to transform fisheye images into corrected single-angle or equirectangular images. This transformation requires reading a set of X, Y mapping tables to reposition each point, known as remap maps."}),"\n",(0,i.jsx)(t.p,{children:"For two sets A and B, The mapping function is"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"alt text",src:n(9956).A+"",width:"279",height:"270"})}),"\n",(0,i.jsx)(t.p,{children:"for every element b in B, b = f(a), f is the mapping function"}),"\n",(0,i.jsx)(t.p,{children:"For image remapping, we denote it as"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"g(x,y) = f(h(x,y))\n"})}),"\n",(0,i.jsxs)(t.p,{children:["If our platform support ",(0,i.jsx)(t.strong,{children:"OpenCV"}),", we can use the remap() function to achieve this. For GStreamer, we make a image filter element to do it."]}),"\n",(0,i.jsxs)(t.p,{children:["Since MOIL fisheye image ",(0,i.jsx)(t.strong,{children:"Anypoint"})," and ",(0,i.jsx)(t.strong,{children:"Panorama"})," calculations involve trigonometric functions, performance would be better on PCs with NVidia GPUs. However, targeting on Renesas RZ/G2L, we will first pre-calculate these maps and perform only remap operations at runtime for optimal performance."]}),"\n",(0,i.jsx)(t.p,{children:"To generate these remap maps on a PC, please download, compile, and run the following GitHub project:"}),"\n",(0,i.jsxs)(t.p,{children:["GitHub: ",(0,i.jsx)(t.a,{href:"https://github.com/cjchng/mainmoil_6view",children:"https://github.com/cjchng/mainmoil_6view"})," (private)"]}),"\n",(0,i.jsx)(t.p,{children:"The MOIL Maps Generator website offer an online interface that we can get the X,Y map files used on GStreamer command."}),"\n",(0,i.jsx)(t.p,{children:'Input the camera and some additional parameter then plress "Start" Button to start the generation. A Zip file will be downloaded, please click on "Keep" when the browser prompt the security concern. Decompress the zip file before using. If you generate maps other than Equirectangular, please rename then to EquimatX, and EquimatY before you use them for Gstreamer command.'}),"\n",(0,i.jsx)(t.p,{children:"The website URL is,"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"http://140.112.12.82/moilmapgen/",children:"http://140.112.12.82/moilmapgen/"})})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},9956:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/image-1-847886afb0ee36d4d7423b7db540800d.png"},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var r=n(6540);const i={},a=r.createContext(i);function o(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);