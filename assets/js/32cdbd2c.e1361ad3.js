"use strict";(self.webpackChunkahlek=self.webpackChunkahlek||[]).push([[2586],{8305:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"tutorial-doc-week4.md/hardware-gpio/linux-gpio-driver","title":"2. Linux GPIO Driver","description":"sysfs is a pseudo file system provided by the Linux kernel that exports information about various kernel subsystems, hardware devices, and associated device drivers from the kernel\'s device model to user space through virtual files. In addition to providing information about various devices and kernel subsystems, exported virtual files are also used for their configuration.","source":"@site/docs/tutorial-doc-week4.md/hardware-gpio/linux-gpio-driver.md","sourceDirName":"tutorial-doc-week4.md/hardware-gpio","slug":"/tutorial-doc-week4.md/hardware-gpio/linux-gpio-driver","permalink":"/lek/docs/tutorial-doc-week4.md/hardware-gpio/linux-gpio-driver","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"practicalSidebar","previous":{"title":"1. Overview","permalink":"/lek/docs/tutorial-doc-week4.md/hardware-gpio/overview"},"next":{"title":"3. Renesas GPIO Definition","permalink":"/lek/docs/tutorial-doc-week4.md/hardware-gpio/renesas-gpio-definition"}}');var s=r(4848),o=r(8453);const t={sidebar_position:2},d="2. Linux GPIO Driver",l={},a=[];function c(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"2-linux-gpio-driver",children:"2. Linux GPIO Driver"})}),"\n",(0,s.jsx)(n.p,{children:"sysfs is a pseudo file system provided by the Linux kernel that exports information about various kernel subsystems, hardware devices, and associated device drivers from the kernel's device model to user space through virtual files. In addition to providing information about various devices and kernel subsystems, exported virtual files are also used for their configuration."}),"\n",(0,s.jsx)(n.p,{children:"In Linux, we usually use these 2 simple commands to access files"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"READ content from a file"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"cat filename\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"WRITE content to a file"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"echo xxx > filename\n"})}),"\n",(0,s.jsx)(n.p,{children:"Let's us start to build Linux GPIO Sysfs Interface, please reference to the document first."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.kernel.org/doc/Documentation/gpio/sysfs.txt",children:"https://www.kernel.org/doc/Documentation/gpio/sysfs.txt"})}),"\n",(0,s.jsx)(n.p,{children:"These are some important steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Ask kernel for the control privilege"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/sys/class/gpio/\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example, to get the control privilege of GPIO19"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"cd /sys/class/gpio\necho 19 > export  74\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Set read/write direction,"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/sys/class/gpio/gpioN/\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example,"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'echo "out" direction\n'})}),"\n",(0,s.jsx)(n.p,{children:"We actually input the below Linux commands on Renesas RZ/G2L"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"cd /sys/class/gpio\necho 19 > export\n"})}),"\n",(0,s.jsx)(n.p,{children:"We would get the below error message:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"invalid argument\n"})}),"\n",(0,s.jsx)(n.p,{children:"Since that GPIO number doesn't exist,"})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>d});var i=r(6540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);