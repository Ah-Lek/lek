"use strict";(self.webpackChunkahlek=self.webpackChunkahlek||[]).push([[6148],{6127:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"tutorial-doc-week2.md/yocto-layer-and-recipe/add-new-recipe","title":"3. Add New Recipe","description":"In yocto projects, it is often necessary to add customized functions. In this tutorial, a new recipe needs to be added. The recipe needs to include a \\".c file\\" and a \\".bb file\\". Here is the example you can be follow.","source":"@site/docs/tutorial-doc-week2.md/yocto-layer-and-recipe/add-new-recipe.md","sourceDirName":"tutorial-doc-week2.md/yocto-layer-and-recipe","slug":"/tutorial-doc-week2.md/yocto-layer-and-recipe/add-new-recipe","permalink":"/lek/docs/tutorial-doc-week2.md/yocto-layer-and-recipe/add-new-recipe","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"practicalSidebar","previous":{"title":"2. Create a Layer Folder","permalink":"/lek/docs/tutorial-doc-week2.md/yocto-layer-and-recipe/create-a-layer-folder"},"next":{"title":"4. Add the Configuration","permalink":"/lek/docs/tutorial-doc-week2.md/yocto-layer-and-recipe/add-the-configuration"}}');var i=o(4848),r=o(8453);const c={sidebar_position:3},l="3. Add New Recipe",d={},a=[];function s(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"3-add-new-recipe",children:"3. Add New Recipe"})}),"\n",(0,i.jsx)(n.p,{children:'In yocto projects, it is often necessary to add customized functions. In this tutorial, a new recipe needs to be added. The recipe needs to include a ".c file" and a ".bb file". Here is the example you can be follow.'}),"\n",(0,i.jsxs)(n.p,{children:["In the file ",(0,i.jsx)(n.code,{children:"meta-lek/cof/layer.comf"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'BBPATH .= ":${LAYERDIR}"\nBBFILES += "${LAYERDIR}/recipes-*/*/*.bb \\\n            ${LAYERDIR}/recipes-*/*/*.bbappend \\\n           "\n\nBBFILE_COLLECTIONS += "lek"\nBBFILE_PATTERN_lek := "^${LAYERDIR}/"\nBBFILE_PRIORITY_lek = "5"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the file ",(0,i.jsx)(n.code,{children:"meta-lek/recipes-app/hello/files/hello.c"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'#include <stdio.h>\n\nint main(void) {\n        printf("Hello World!!\\n");\n\n        return 0;\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the file ",(0,i.jsx)(n.code,{children:"meta-lek/recipes-app/hello/src/hello_1.0.bb.c"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'SUMMARY = "Simple Hello World Application"\nDESCRIPTION = "A test application to demonstrate how to create a recipe \\\n              by directly compiling C files with BitBake."\n\n# a category this package belong to\nSECTION = "examples"\n# this package is optional, lacking of it doesn\'t cause error\nPRIORITY = "optional"\n\nLICENSE = "MIT"\nLIC_FILES_CHKSUM = "\\\n    file://${COMMON_LICENSE_DIR}/MIT;md5=0835ade698e0bcf8506ecda2f7b4f302"\n    \nFILESEXTRAPATHS_prepend := "${THISDIR}/src:"\ndo_package_qa[noexec] = "1"\n\nSRC = "${WORKDIR}/hello-1.0"\n\nSRC_URI = "file://hello-1.0.tar.gz"\n\nS = "${WORKDIR}"\n\n# fix WARN_QA error\nTARGET_CC_ARCH += " ${CFLAGS} ${LDFLAGS}"\n\ndo_compile() {\n    ${CC} -c ${SRC}/helloprint.c\n    ${CC} -c ${SRC}/hello.c\n    ${CC} -o hello hello.o helloprint.o\n}\n\ndo_install() {\n    install -d ${D}${bindir}\n    install -m 0755 ${WORKDIR}/hello ${D}${bindir}\n    install -m 0755 ${SRC}/moil_coffee ${D}${bindir}\n    install -m 0755 ${SRC}/q563_rzgpio ${D}${bindir}\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>l});var t=o(6540);const i={},r=t.createContext(i);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);